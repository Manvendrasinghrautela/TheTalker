{% extends 'blog_app/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'blog_app/search_listing.css' %}">
{% endblock %}

{% block content %}

<div class="search-container">
  <!-- Search Bar -->
  <div class="search-bar-section">
    <form class="search-form" method="get" action="{% url 'search_results' %}">
      <div class="search-input-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" name="q" class="search-input" placeholder="Search articles..." value="{{ query|default:'' }}">
        <button type="button" class="filter-btn"><i class="fas fa-sliders-h"></i></button>
      </div>
    </form>
  </div>

  <!-- Results Header -->
  <div class="results-header">
    <h1 class="results-title">Results for "{{ query }}"</h1>
  </div>

  <!-- Results List -->
  <div class="results-container">
    {% for post in results %}
      <div class="result-card result-card-{{ forloop.counter|add:0|floatformat:0|stringformat:"s" }}">
        {% if post.slug %}
          <a href="{% url 'article_detail' post.slug %}" class="result-link">
        {% else %}
          <a href="{% url 'post_detail' post.pk %}" class="result-link">
        {% endif %}
          <div class="result-avatar">
            {% if post.image %}
              <img src="{{ post.image.url }}" alt="{{ post.title }}" class="avatar-image">
            {% else %}
              <div class="avatar-placeholder">ðŸ“„</div>
            {% endif %}
          </div>
          
          <div class="result-content">
            <h3 class="result-title">{{ post.title|truncatewords:6 }}</h3>
            <p class="result-description">{{ post.content|truncatewords:8 }}</p>
          </div>
          
          <div class="result-category">
            {% if post.category %}
              {{ post.category.name }}
            {% else %}
              Article
            {% endif %}
          </div>
        </a>
      </div>
    {% empty %}
      <div class="no-results">
        <h2>No results found for "{{ query }}"</h2>
        <p>Try adjusting your search terms or browse our categories.</p>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
